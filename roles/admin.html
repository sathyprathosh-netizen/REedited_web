<!DOCTYPE html>
<html lang="en">

<script>
    (function () {
        try {
            var user = JSON.parse(sessionStorage.getItem('cs_user') || localStorage.getItem('cs_user'));
            var allowed = ['Super Admin', 'Admin', 'Manager'];
            if (!user || !allowed.includes(user.position)) {
                window.location.replace('../login.html');
            }
        } catch (e) {
            window.location.replace('../login.html');
        }
    })();
</script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard ‚Äî CULINA-SUITE</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
    rel="stylesheet">
<link rel="stylesheet" href="../css/style.css">
<style>
    :root {
        --rb-primary: #4f8ef7;
        --rb-accent: #00d4b4;
        --rb-bg: #0d0f12;
        --container-padding: 40px;
    }

    body {
        background: var(--rb-bg);
        color: var(--text-primary);
        min-height: 100vh;
        overflow-x: hidden;
    }

    .rb-layout {
        display: flex;
        flex-direction: column;
        min-height: 100vh;
    }

    .rb-top-bar {
        height: 75px;
        background: rgba(26, 30, 46, 0.85);
        border-bottom: 1px solid var(--border-subtle);
        backdrop-filter: blur(20px);
        padding: 0 var(--container-padding);
        display: flex;
        align-items: center;
        justify-content: space-between;
        position: sticky;
        top: 0;
        z-index: 1000;
        gap: 20px;
    }

    .top-bar-inner {
        width: 100%;
        max-width: 1440px;
        margin: 0 auto;
        display: flex;
        align-items: center;
        justify-content: space-between;
        height: 100%;
    }

    .rb-main {
        flex: 1;
        padding: 50px var(--container-padding);
        width: 100%;
        max-width: 1440px;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: 40px;
    }

    .rb-header {
        margin-bottom: 40px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--border-subtle);
    }

    .rb-header h2,
    .rb-header h1 {
        font-size: 34px;
        font-weight: 900;
        margin-bottom: 12px;
        display: flex;
        align-items: center;
        gap: 15px;
        letter-spacing: -0.02em;
    }

    .rb-header p {
        color: var(--text-secondary);
        font-size: 15px;
        line-height: 1.6;
        max-width: 600px;
    }

    .highlight {
        color: var(--rb-primary);
    }

    /* --- PHASE 17 aesthetic --- */
    .rb-card,
    .course-card,
    .dashboard-grid section {
        position: relative;
        background: rgba(255, 255, 255, 0.03);
        backdrop-filter: blur(15px);
        border: 1px solid var(--border-subtle);
        border-radius: 16px;
        padding: 24px;
        transition: all 0.4s cubic-bezier(0.165, 0.84, 0.44, 1);
        overflow: hidden;
        animation: nexus-glow-pulse 8s infinite ease-in-out;
        display: flex;
        flex-direction: column;
    }

    .dashboard-grid .col-main section,
    .dashboard-grid .col-side section,
    .dashboard-grid .col-logistics section {
        display: flex;
        flex-direction: column;
    }

    /* Standardize Heights to prevent gaps */
    .dashboard-grid section {
        min-height: 280px;
    }

    .rb-card::after,
    .course-card::after {
        content: '';
        position: absolute;
        inset: 0;
        border-radius: inherit;
        padding: 1px;
        background: linear-gradient(135deg, var(--rb-primary), transparent, var(--rb-accent));
        mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
        mask-composite: exclude;
        opacity: 0;
        transition: opacity 0.4s ease;
        pointer-events: none;
        z-index: 2;
    }

    .rb-card:hover::after,
    .course-card:hover::after {
        opacity: 0.4;
    }

    .rb-view {
        animation: surface-reveal 1.2s cubic-bezier(0.23, 1, 0.32, 1) forwards;
        width: 100%;
    }

    @keyframes nexus-glow-pulse {

        0%,
        100% {
            box-shadow: 0 0 15px rgba(79, 142, 247, 0.05);
        }

        50% {
            box-shadow: 0 0 40px rgba(79, 142, 247, 0.15);
        }
    }

    .rb-stat-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
        gap: 30px;
        margin-bottom: 40px;
    }

    .rb-stat-grid .rb-card {
        display: flex;
        flex-direction: column;
        align-items: center;
        text-align: center;
        justify-content: center;
        min-height: 140px;
        background: linear-gradient(135deg, rgba(255, 255, 255, 0.05), rgba(255, 255, 255, 0.02));
    }

    @keyframes surface-reveal {
        from {
            opacity: 0;
            filter: blur(20px);
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            filter: blur(0);
            transform: translateY(0);
        }
    }

    .rb-btn {
        background: var(--rb-primary);
        color: white;
        border: none;
        padding: 12px 24px;
        border-radius: 8px;
        font-weight: 800;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        text-transform: uppercase;
        font-size: 11px;
        letter-spacing: 0.05em;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
    }

    .view-btn {
        opacity: 0.6;
        background: transparent !important;
        border: 1px solid transparent !important;
        box-shadow: none !important;
        padding: 8px 16px;
    }

    .view-btn.active {
        opacity: 1;
        color: white !important;
        border-bottom: 2px solid var(--rb-primary) !important;
        border-radius: 0;
    }

    /* Dashboard Master Grid Overflow */
    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 30px;
        margin-top: 35px;
    }

    .col-main,
    .col-side,
    .col-logistics {
        display: flex;
        flex-direction: column;
        gap: 30px;
        height: 100%;
    }

    .col-main section:last-child,
    .col-side section:last-child,
    .col-logistics section:last-child {
        margin-bottom: 0 !important;
        flex: 1;
    }

    .health-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-top: 25px;
    }

    .metric-ring {
        width: 65px;
        height: 65px;
        border-radius: 50%;
        border: 4px solid rgba(255, 255, 255, 0.05);
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .metric-ring::after {
        content: '';
        position: absolute;
        inset: -4px;
        border-radius: 50%;
        border: 4px solid var(--rb-primary);
        border-bottom-color: transparent;
        animation: ring-rotate 2s linear infinite;
    }

    @keyframes ring-rotate {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    .timeline-item {
        padding: 0 0 25px 25px;
        border-left: 2px solid var(--border-subtle);
        position: relative;
    }

    .timeline-item::after {
        content: '';
        position: absolute;
        left: -6px;
        top: 0;
        width: 11px;
        height: 11px;
        border-radius: 50%;
        background: var(--rb-primary);
        box-shadow: 0 0 12px var(--rb-primary);
        border: 2px solid var(--rb-bg);
    }

    .quick-action-btn {
        padding: 14px 20px;
        background: rgba(255, 255, 255, 0.02);
        border: 1px solid var(--border-subtle);
        border-radius: 12px;
        display: flex;
        align-items: center;
        gap: 15px;
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
        width: 100%;
        color: var(--text-secondary);
        font-size: 13px;
        font-weight: 600;
    }

    .quick-action-btn:hover {
        background: rgba(79, 142, 247, 0.12);
        border-color: var(--rb-primary);
        color: white;
        transform: translateX(8px);
        box-shadow: 0 4px 20px rgba(79, 142, 247, 0.1);
    }

    .badge {
        font-size: 10px;
        font-weight: 800;
        padding: 4px 10px;
        border-radius: 6px;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    /* Course Grid Layout */
    .course-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 30px;
        margin-top: 30px;
    }

    .course-card {
        padding: 0;
    }

    .course-image {
        width: 100%;
        height: 180px;
        object-fit: cover;
        border-bottom: 1px solid var(--border-subtle);
    }

    .course-content {
        padding: 24px;
        flex: 1;
    }

    .course-category {
        font-size: 10px;
        text-transform: uppercase;
        letter-spacing: 0.12em;
        color: var(--rb-primary);
        font-weight: 800;
        margin-bottom: 10px;
    }

    .course-title {
        font-size: 20px;
        font-weight: 800;
        margin-bottom: 15px;
        color: white;
        line-height: 1.3;
    }

    .course-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 12px;
        color: var(--text-muted);
        margin-bottom: 20px;
    }

    .rb-table-container {
        width: 100%;
        overflow-x: auto;
        border-radius: 12px;
        border: 1px solid var(--border-subtle);
        flex: 1;
    }

    .rb-table {
        width: 100%;
        border-collapse: collapse;
        text-align: left;
    }

    /* --- RESPONSIVE DESIGN (MOBILE-FIRST PRINCIPLES) --- */
    @media (max-width: 1200px) {
        .dashboard-grid {
            grid-template-columns: repeat(2, 1fr);
        }

        .col-logistics {
            grid-column: span 2;
            display: grid;
            grid-template-columns: 1fr 1fr;
        }
    }

    @media (max-width: 1024px) {
        :root {
            --container-padding: 30px;
        }

        .rb-stat-grid {
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .rb-header h1,
        .rb-header h2 {
            font-size: 28px;
        }
    }

    @media (max-width: 900px) {
        .dashboard-grid {
            grid-template-columns: 1fr;
        }

        .col-main,
        .col-side,
        .col-logistics {
            grid-column: span 1;
            display: flex;
            flex-direction: column;
        }

        .col-logistics {
            grid-template-columns: 1fr;
        }

        .rb-main {
            padding: 30px var(--container-padding);
            gap: 30px;
        }
    }

    @media (max-width: 768px) {
        :root {
            --container-padding: 20px;
        }

        .rb-top-bar {
            height: auto;
            padding: 15px 20px;
        }

        .top-bar-inner {
            flex-direction: column;
            gap: 15px;
        }

        .nav-brand-container {
            width: 100%;
            justify-content: center;
        }

        .nav-links {
            width: 100%;
            justify-content: flex-start;
            overflow-x: auto;
            padding-bottom: 5px;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none;
        }

        .nav-links::-webkit-scrollbar {
            display: none;
        }

        .nav-links .rb-btn {
            flex-shrink: 0;
            white-space: nowrap;
            padding: 8px 12px;
            font-size: 10px;
        }

        .nav-actions {
            width: 100%;
            justify-content: center;
            border-top: 1px solid var(--border-subtle);
            padding-top: 15px;
        }

        .rb-stat-grid {
            grid-template-columns: 1fr;
        }

        .health-grid {
            grid-template-columns: 1fr;
            gap: 15px;
        }

        .desktop-only {
            display: none !important;
        }
    }

    @media (max-width: 480px) {

        .rb-header h1,
        .rb-header h2 {
            font-size: 24px;
            flex-direction: column;
            align-items: flex-start;
            gap: 5px;
        }

        .rb-card {
            padding: 20px;
        }

        .rb-header p {
            font-size: 13px;
        }
    }


    .rb-table th {
        text-align: left;
        padding: 18px 24px;
        background: rgba(255, 255, 255, 0.02);
        border-bottom: 2px solid var(--border-subtle);
        color: var(--text-muted);
        font-size: 11px;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        font-weight: 800;
    }

    .rb-table td {
        padding: 20px 24px;
        border-bottom: 1px solid var(--border-subtle);
        font-size: 14px;
        color: var(--text-secondary);
    }

    .nav-brand-container {
        display: flex;
        align-items: center;
        gap: 30px;
    }

    .nav-links {
        display: flex;
        gap: 10px;
    }

    .limit-meter {
        height: 10px;
        background: rgba(255, 255, 255, 0.05);
        border-radius: 5px;
        overflow: hidden;
        margin-top: 15px;
    }

    .limit-fill {
        height: 100%;
        background: var(--rb-primary);
        width: 0%;
        transition: width 1s ease;
    }

    /* Chart Interactivity */
    .chart-bar {
        cursor: pointer;
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
        position: relative;
    }

    .chart-bar:hover {
        filter: brightness(1.3);
        transform: scaleY(1.05);
        box-shadow: 0 0 20px rgba(79, 142, 247, 0.3);
        z-index: 10;
    }

    .chart-bar:active {
        transform: scaleY(0.98);
    }

    /* --- MODAL SYSTEM (ADMIN) --- */
    .rb-modal {
        position: fixed;
        inset: 0;
        background: rgba(13, 15, 18, 0.9);
        backdrop-filter: blur(15px);
        z-index: 2000;
        display: none;
        align-items: center;
        justify-content: center;
        padding: 20px;
        animation: modal-backdrop-in 0.4s ease forwards;
    }

    .rb-modal.active {
        display: flex;
    }

    .modal-content {
        background: rgba(26, 30, 46, 0.95);
        border: 1px solid var(--border-subtle);
        border-radius: 20px;
        width: 100%;
        max-width: 500px;
        max-height: 90vh;
        overflow-y: auto;
        position: relative;
        padding: 40px;
        box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
        animation: modal-content-in 0.5s cubic-bezier(0.165, 0.84, 0.44, 1) forwards;
    }

    @keyframes modal-backdrop-in {
        from {
            opacity: 0;
        }

        to {
            opacity: 1;
        }
    }

    @keyframes modal-content-in {
        from {
            opacity: 0;
            transform: translateY(40px) scale(0.95);
        }

        to {
            opacity: 1;
            transform: translateY(0) scale(1);
        }
    }

    .close-modal {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(255, 255, 255, 0.05);
        border: none;
        color: white;
        width: 36px;
        height: 36px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 20px;
    }

    .close-modal:hover {
        background: rgba(255, 77, 77, 0.2);
        color: #ff4d4d;
        transform: rotate(90deg);
    }

    .status-toggle {
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .status-toggle:hover {
        filter: brightness(1.2);
        transform: scale(1.05);
    }

    /* --- FORM STYLING --- */
    .form-group {
        margin-bottom: 20px;
        display: flex;
        flex-direction: column;
        gap: 8px;
        text-align: left;
    }

    .form-input {
        background: rgba(255, 255, 255, 0.05);
        border: 1px solid var(--border-subtle);
        border-radius: 8px;
        padding: 12px 16px;
        color: white;
        font-family: inherit;
        font-size: 14px;
        transition: all 0.3s ease;
        width: 100%;
        outline: none;
        box-sizing: border-box;
    }

    .form-input:focus {
        border-color: var(--rb-primary);
        background: rgba(79, 142, 247, 0.1);
        box-shadow: 0 0 15px rgba(79, 142, 247, 0.1);
    }

    .form-input option {
        background: #1a1e2e;
        color: white;
    }

    /* Restoration of broken chart tooltip logic */
    .chart-bar::before {
        content: attr(data-tooltip);
        position: absolute;
        top: -40px;
        left: 50%;
        transform: translateX(-50%) translateY(10px);
        background: rgba(0, 0, 0, 0.9);
        color: white;
        padding: 5px 10px;
        border-radius: 4px;
        font-size: 10px;
        white-space: nowrap;
        opacity: 0;
        pointer-events: none;
        transition: all 0.3s ease;
        border: 1px solid var(--rb-primary);
        font-weight: 800;
    }

    .chart-bar:hover::before {
        opacity: 1;
        transform: translateX(-50%) translateY(0);
    }

    .demo-bar-container {
        cursor: pointer;
        transition: all 0.3s ease;
    }

    .demo-bar-container:hover {
        transform: translateX(5px);
    }

    .demo-bar-container:hover .demo-fill {
        box-shadow: 0 0 15px currentColor;
        filter: brightness(1.2);
    }
</style>
</head>

<body>
    <div class="rb-layout">
        <header class="rb-top-bar">
            <div class="top-bar-inner">
                <div class="nav-brand-container">
                    <div class="login-logo" style="margin: 0; opacity: 1;">CULINA<span>-SUITE</span></div>
                    <nav class="nav-links">
                        <button onclick="switchView('overview')" class="rb-btn view-btn active" id="btn-overview">‚óà
                            Overview</button>
                        <button onclick="switchView('courses')" class="rb-btn view-btn" id="btn-courses">üìö
                            Courses</button>
                        <button onclick="switchView('analytics')" class="rb-btn view-btn" id="btn-analytics">üìà
                            Analytics</button>
                        <button onclick="switchView('mods')" class="rb-btn view-btn" id="btn-mods">üí¨
                            Moderation</button>
                    </nav>
                </div>
                <div class="nav-actions" style="display: flex; gap: 15px; align-items: center;">
                    <button onclick="syncLocalData()" class="rb-btn"
                        style="background: rgba(0,212,180,0.1); color: var(--rb-accent); padding: 8px 16px; font-size: 10px;">üîÑ
                        Sync Data</button>
                    <a href="../login.html" onclick="sessionStorage.removeItem('cs_user')" class="rb-btn"
                        style="background: rgba(255,77,77,0.1); color: #ff4d4d; padding: 8px 16px; font-size: 10px; text-decoration: none;">üö™
                        Logout</a>
                </div>
            </div>
        </header>

        <main class="rb-main">
            <!-- Overview View -->
            <div id="view-overview" class="rb-view">
                <header class="rb-header">
                    <div
                        style="font-size: 10px; text-transform: uppercase; letter-spacing: 0.2em; color: var(--rb-primary); font-weight: 800; margin-bottom: 15px;">
                        Admin Control Center</div>
                    <h1>Portal <span class="highlight">Intelligence</span></h1>
                    <p>Real-time oversight of infrastructure dynamics and operational workflows.</p>
                </header>

                <div
                    style="display: flex; gap: 20px; margin-bottom: 30px; padding: 15px 25px; background: rgba(255,255,255,0.02); border-radius: 12px; border: 1px solid var(--border-subtle); align-items: center;">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span class="pulse"
                            style="width: 8px; height: 8px; background: var(--rb-accent); border-radius: 50%;"></span>
                        <span
                            style="font-size: 11px; font-weight: 800; color: var(--text-secondary); text-transform: uppercase;">Core
                            Engine: Nominal</span>
                    </div>
                    <div style="width: 1px; height: 15px; background: var(--border-subtle);"></div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span
                            style="font-size: 11px; font-weight: 800; color: var(--text-secondary); text-transform: uppercase;">Sync
                            Velocity: 4.2 MB/s</span>
                    </div>
                    <div style="width: 1px; height: 15px; background: var(--border-subtle);"></div>
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span
                            style="font-size: 11px; font-weight: 800; color: var(--text-secondary); text-transform: uppercase;">Edge
                            Nodes: 12 Online</span>
                    </div>
                </div>

                <div class="rb-stat-grid">
                    <div class="rb-card">
                        <div
                            style="font-size: 11px; color: var(--text-muted); text-transform: uppercase; font-weight: 800; letter-spacing: 0.1em; margin-bottom: 5px;">
                            Daily Hits</div>
                        <div style="font-size: 36px; font-weight: 900; color: white;">1.2k</div>
                    </div>
                    <div class="rb-card">
                        <div
                            style="font-size: 11px; color: var(--text-muted); text-transform: uppercase; font-weight: 800; letter-spacing: 0.1em; margin-bottom: 5px;">
                            Enrollments</div>
                        <div style="font-size: 36px; font-weight: 900; color: var(--rb-accent);">42</div>
                    </div>
                    <div class="rb-card">
                        <div
                            style="font-size: 11px; color: var(--text-muted); text-transform: uppercase; font-weight: 800; letter-spacing: 0.1em; margin-bottom: 5px;">
                            Active Polls</div>
                        <div style="font-size: 36px; font-weight: 900; color: #ffb800;">15</div>
                    </div>
                    <div class="rb-card">
                        <div
                            style="font-size: 11px; color: var(--text-muted); text-transform: uppercase; font-weight: 800; letter-spacing: 0.1em; margin-bottom: 5px;">
                            Moderators</div>
                        <div style="font-size: 36px; font-weight: 900; color: #7b61ff;">8</div>
                    </div>
                </div>

                <div class="dashboard-grid">
                    <div class="col-main">
                        <section class="rb-card">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <h2>Academic Performance Vector</h2>
                                <span class="badge"
                                    style="background: rgba(0, 212, 180, 0.1); color: var(--rb-primary);">Optimal</span>
                            </div>
                            <div class="health-grid">
                                <div style="text-align: center;">
                                    <div class="metric-ring" style="margin: 0 auto 10px;"><span
                                            style="font-size: 14px; font-weight: 800;">84%</span></div>
                                    <div style="font-size: 10px; color: var(--text-muted); text-transform: uppercase;">
                                        Syllabus Coverage</div>
                                </div>
                                <div style="text-align: center;">
                                    <div class="metric-ring" style="margin: 0 auto 10px;"><span
                                            style="font-size: 14px; font-weight: 800;">96%</span></div>
                                    <div style="font-size: 10px; color: var(--text-muted); text-transform: uppercase;">
                                        Student Attendance</div>
                                </div>
                                <div style="text-align: center;">
                                    <div class="metric-ring" style="margin: 0 auto 10px;"><span
                                            style="font-size: 14px; font-weight: 800;">98%</span></div>
                                    <div style="font-size: 10px; color: var(--text-muted); text-transform: uppercase;">
                                        Feedback Index</div>
                                </div>
                            </div>
                        </section>

                        <section class="rb-card" id="limit-card" onclick="switchView('courses')"
                            style="cursor: pointer;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <h3>Course Capacity</h3>
                                <span class="badge" id="pct-label"
                                    style="background: rgba(0, 212, 180, 0.1); color: var(--rb-accent);">0%</span>
                            </div>
                            <div style="margin-top: 20px;">
                                <div
                                    style="display: flex; justify-content: space-between; font-size: 13px; font-weight:700;">
                                    <span>Used Allocation</span>
                                    <span><span id="used-slots">0</span> / <span id="total-slots">0</span> Slots</span>
                                </div>
                                <div class="limit-meter">
                                    <div class="limit-fill" id="limit-fill"></div>
                                </div>
                            </div>
                        </section>

                        <section class="rb-card">
                            <div
                                style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                <h3>Moderation Queue</h3>
                                <span class="badge"
                                    style="background: rgba(255, 77, 77, 0.1); color: #ff4d4d;">Urgent</span>
                            </div>
                            <div style="display: flex; flex-direction: column; gap: 12px;">
                                <div
                                    style="padding: 12px; background: rgba(255,255,255,0.02); border-radius: 8px; border: 1px solid rgba(255,59,48,0.2);">
                                    <div style="font-size: 11px; color: var(--text-muted);">@priya ‚Ä¢ Student</div>
                                    <div style="font-size: 13px; color: white; margin-top: 5px;">"Is there a retry limit
                                        for the Culina assessment?"</div>
                                </div>
                                <div style="padding: 12px; background: rgba(255,255,255,0.02); border-radius: 8px;">
                                    <div style="font-size: 11px; color: var(--text-muted);">@chef_marco ‚Ä¢ Instructor
                                    </div>
                                    <div style="font-size: 13px; color: white; margin-top: 5px;">"Course materials for
                                        Week 4 are now live."</div>
                                </div>
                                <div style="padding: 12px; background: rgba(255,255,255,0.02); border-radius: 8px;">
                                    <div style="font-size: 11px; color: var(--text-muted);">@lisa_m ‚Ä¢ Admin</div>
                                    <div style="font-size: 13px; color: white; margin-top: 5px;">"Sync failed for the
                                        regional inventory nodes."</div>
                                </div>
                                <div style="padding: 12px; background: rgba(255,255,255,0.02); border-radius: 8px;">
                                    <div style="font-size: 11px; color: var(--text-muted);">@tom_cook ‚Ä¢ Moderator</div>
                                    <div style="font-size: 13px; color: white; margin-top: 5px;">"Flagged: Inappropriate
                                        content in Level 2 forum."</div>
                                </div>
                            </div>
                            <button class="rb-btn"
                                style="margin-top: 15px; width:100%; height:36px; font-size:10px; background: rgba(255,255,255,0.05); color:white;"
                                onclick="switchView('mods')">VIEW ALL COMMENTS</button>
                        </section>

                        <section class="rb-card">
                            <h3>Security Audit</h3>
                            <div style="margin-top: 20px; display: flex; flex-direction: column; gap: 12px;">
                                <div style="display: flex; justify-content: space-between; font-size: 11px;">
                                    <span style="color: var(--text-muted);">Last Full Scan</span>
                                    <span style="color: white; font-weight: 700;">14m ago</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; font-size: 11px;">
                                    <span style="color: var(--text-muted);">Threads Blocked</span>
                                    <span style="color: white; font-weight: 700;">142</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; font-size: 11px;">
                                    <span style="color: var(--text-muted);">Integrity Hash</span>
                                    <span style="color: white; font-weight: 700;">SHA-256 Valid</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; font-size: 11px;">
                                    <span style="color: var(--text-muted);">Firewall Status</span>
                                    <span style="color: var(--rb-accent); font-weight: 700;">OPTIMIZED</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; font-size: 11px;">
                                    <span style="color: var(--text-muted);">Encryption Protocol</span>
                                    <span style="color: white; font-weight: 700;">TLS 1.3</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; font-size: 11px;">
                                    <span style="color: var(--text-muted);">Secure Edge Tunnels</span>
                                    <span style="color: white; font-weight: 700;">4 Active</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; font-size: 11px;">
                                    <span style="color: var(--text-muted);">Threat Mapping</span>
                                    <span style="color: var(--rb-primary); font-weight: 700;">NOMINAL</span>
                                </div>
                            </div>
                        </section>
                    </div>

                    <div class="col-side">
                        <section class="rb-card">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <h3>Operational Feed</h3>
                                <span class="badge"
                                    style="background: rgba(0, 212, 180, 0.1); color: var(--rb-accent);">LIVE</span>
                            </div>
                            <div id="dashboard-timeline"
                                style="margin-top: 25px; flex: 1; display: flex; flex-direction: column; gap: 18px;">
                                <!-- Static Fallback Items / Seeds -->
                                <div class="timeline-item">
                                    <div
                                        style="font-size: 11px; color: var(--rb-primary); font-weight: 800; text-transform: uppercase;">
                                        System</div>
                                    <div style="font-size: 13px; font-weight: 600; margin: 4px 0;">Database shard
                                        migration complete</div>
                                    <div style="font-size: 10px; color: var(--text-muted);">02:00:05</div>
                                </div>
                                <div class="timeline-item">
                                    <div
                                        style="font-size: 11px; color: var(--rb-primary); font-weight: 800; text-transform: uppercase;">
                                        Admin</div>
                                    <div style="font-size: 13px; font-weight: 600; margin: 4px 0;">Global sync protocol
                                        initiated</div>
                                    <div style="font-size: 10px; color: var(--text-muted);">09:12:44</div>
                                </div>
                                <div class="timeline-item">
                                    <div
                                        style="font-size: 11px; color: var(--rb-primary); font-weight: 800; text-transform: uppercase;">
                                        Security</div>
                                    <div style="font-size: 13px; font-weight: 600; margin: 4px 0;">Access geometry
                                        verified</div>
                                    <div style="font-size: 10px; color: var(--text-muted);">10:05:21</div>
                                </div>
                                <div class="timeline-item">
                                    <div
                                        style="font-size: 11px; color: var(--rb-primary); font-weight: 800; text-transform: uppercase;">
                                        Audit</div>
                                    <div style="font-size: 13px; font-weight: 600; margin: 4px 0;">Managerial integrity
                                        check passed</div>
                                    <div style="font-size: 10px; color: var(--text-muted);">11:45:10</div>
                                </div>
                            </div>
                        </section>

                        <section class="rb-card">
                            <h3>Engagement Heatmap</h3>
                            <div
                                style="height: 180px; display: flex; align-items: flex-end; gap: 10px; margin-top: 25px;">
                                <div
                                    style="flex: 1; height: 40%; background: var(--rb-primary); opacity: 0.3; border-radius: 4px;">
                                </div>
                                <div
                                    style="flex: 1; height: 65%; background: var(--rb-primary); opacity: 0.5; border-radius: 4px;">
                                </div>
                                <div
                                    style="flex: 1; height: 85%; background: var(--rb-primary); opacity: 0.8; border-radius: 4px;">
                                </div>
                                <div
                                    style="flex: 1; height: 55%; background: var(--rb-primary); opacity: 0.4; border-radius: 4px;">
                                </div>
                                <div style="flex: 1; height: 95%; background: var(--rb-primary); border-radius: 4px;">
                                </div>
                                <div
                                    style="flex: 1; height: 75%; background: var(--rb-primary); opacity: 0.7; border-radius: 4px;">
                                </div>
                                <div
                                    style="flex: 1; height: 45%; background: var(--rb-primary); opacity: 0.3; border-radius: 4px;">
                                </div>
                                <div
                                    style="flex: 1; height: 85%; background: var(--rb-primary); opacity: 0.2; border-radius: 4px;">
                                </div>
                            </div>
                            <div
                                style="margin-top: 20px; padding-top: 20px; border-top: 1px solid rgba(255,255,255,0.05);">
                                <div
                                    style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                                    <h4
                                        style="font-size: 12px; font-weight: 800; text-transform: uppercase; color: var(--text-muted);">
                                        Peak Performers</h4>
                                </div>
                                <div style="display: flex; flex-direction: column; gap: 10px;">
                                    <div style="display: flex; justify-content: space-between; font-size: 12px;">
                                        <span style="color: white;">Advanced Pastry</span>
                                        <span style="color: var(--rb-accent);">+22%</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; font-size: 12px;">
                                        <span style="color: white;">Sous-Vide Fundamentals</span>
                                        <span style="color: var(--rb-accent);">+18%</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; font-size: 12px;">
                                        <span style="color: white;">Molecular Kitchen</span>
                                        <span style="color: var(--rb-accent);">+15%</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; font-size: 12px;">
                                        <span style="color: white;">Global Operations</span>
                                        <span style="color: var(--rb-accent);">+12%</span>
                                    </div>
                                </div>
                            </div>
                            <div
                                style="display: flex; justify-content: space-between; margin-top: 15px; font-size: 9px; color: var(--text-muted); font-weight:800; text-transform:uppercase;">
                                <span>Mon</span><span>Tue</span><span>Wed</span><span>Thu</span><span>Fri</span><span>Sat</span>
                            </div>
                        </section>

                        <section class="rb-card">
                            <h3>Regional Insight</h3>
                            <div style="margin-top: 20px; display: flex; flex-direction: column; gap: 15px;">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span style="font-size: 12px; color: white;">Pacific Edge</span>
                                    <span
                                        style="font-size: 10px; color: var(--rb-accent); font-weight: 800;">ONLINE</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span style="font-size: 12px; color: white;">EMEA Shard</span>
                                    <span
                                        style="font-size: 10px; color: var(--rb-accent); font-weight: 800;">ONLINE</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span style="font-size: 12px; color: white;">NA-East Cluster</span>
                                    <span style="font-size: 10px; color: #ffb800; font-weight: 800;">OPTIMIZING</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span style="font-size: 12px; color: white;">South-Asia Relay</span>
                                    <span
                                        style="font-size: 10px; color: var(--text-muted); font-weight: 800;">STANDBY</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span style="font-size: 12px; color: white;">Latam Node 2</span>
                                    <span
                                        style="font-size: 10px; color: var(--rb-primary); font-weight: 800;">SYNCING</span>
                                </div>
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <span style="font-size: 12px; color: white;">Average Hub Ping</span>
                                    <span style="font-size: 10px; color: white; font-weight: 800;">18ms</span>
                                </div>
                            </div>
                        </section>
                    </div>

                    <div class="col-logistics">
                        <section class="rb-card">
                            <h3>System Broadcast</h3>
                            <div style="margin-top: 20px; display: flex; flex-direction: column; gap: 15px;">
                                <div
                                    style="padding: 15px; background: rgba(255, 255, 255, 0.02); border-left: 3px solid var(--rb-primary); border-radius: 4px 12px 12px 4px;">
                                    <div style="font-size: 13px; font-weight: 700; color: white;">Maintenance Window
                                    </div>
                                    <p style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">Primary
                                        database shard migration scheduled for 02:00 UTC.</p>
                                </div>
                                <div
                                    style="padding: 15px; background: rgba(255, 255, 255, 0.02); border-left: 3px solid var(--rb-accent); border-radius: 4px 12px 12px 4px;">
                                    <div style="font-size: 13px; font-weight: 700; color: white;">Global Sync Active
                                    </div>
                                    <p style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">Neural
                                        edge nodes currently propagating latest catalog updates.</p>
                                </div>
                                <div
                                    style="padding: 15px; background: rgba(255, 255, 255, 0.02); border-left: 3px solid #ffb800; border-radius: 4px 12px 12px 4px;">
                                    <div style="font-size: 13px; font-weight: 700; color: white;">API Rate Limit Warning
                                    </div>
                                    <p style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">Elevated
                                        traffic from regional nodes. Auto-scaling triggered.</p>
                                </div>
                                <div
                                    style="padding: 15px; background: rgba(255, 255, 255, 0.02); border-left: 3px solid #7b61ff; border-radius: 4px 12px 12px 4px;">
                                    <div style="font-size: 13px; font-weight: 700; color: white;">New Policy Deployed
                                    </div>
                                    <p style="font-size: 12px; color: var(--text-secondary); margin-top: 5px;">Content
                                        moderation guidelines v4.2 now enforced globally.</p>
                                </div>
                            </div>
                        </section>

                        <section class="rb-card">
                            <h3>Real-time Telemetry</h3>
                            <div style="margin-top: 20px; display: flex; flex-direction: column; gap: 15px;">
                                <div>
                                    <div
                                        style="display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 8px;">
                                        <span>DISK I/O VELOCITY</span>
                                        <span style="color: var(--rb-primary); font-weight: 800;">58%</span>
                                    </div>
                                    <div
                                        style="height: 4px; background: rgba(255,255,255,0.05); border-radius: 2px; overflow: hidden;">
                                        <div style="width: 58%; height: 100%; background: var(--rb-primary);"></div>
                                    </div>
                                </div>
                                <div>
                                    <div
                                        style="display: flex; justify-content: space-between; font-size: 11px; margin-bottom: 8px;">
                                        <span>API RESPONSE LOAD</span>
                                        <span style="color: var(--rb-accent); font-weight: 800;">32%</span>
                                    </div>
                                    <div
                                        style="height: 4px; background: rgba(255,255,255,0.05); border-radius: 2px; overflow: hidden;">
                                        <div style="width: 32%; height: 100%; background: var(--rb-accent);"></div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <section class="rb-card">
                            <h3>Quick Terminal</h3>
                            <div style="margin-top: 20px; display: flex; flex-direction: column; gap: 12px;">
                                <button class="quick-action-btn" onclick="addCourse()"><span>üöÄ</span> Quick Create
                                    Course</button>
                                <button class="quick-action-btn" onclick="syncLocalData()"><span>üîÑ</span> Force System
                                    Sync</button>
                                <button class="quick-action-btn" onclick="switchView('mods')"><span>üí¨</span> Open
                                    Moderation Desk</button>
                                <button class="quick-action-btn"><span>üìä</span> Export Analytics PDF</button>
                                <button class="quick-action-btn"><span>üõ†Ô∏è</span> Platform Diagnostics</button>
                                <button class="quick-action-btn"><span>üìú</span> System Audit Logs</button>
                                <button class="quick-action-btn"><span>üîë</span> Security Credentials</button>
                                <button class="quick-action-btn"><span>üì°</span> Network Topology</button>
                                <button class="quick-action-btn"><span>‚òÅÔ∏è</span> Cloud Instance Control</button>
                            </div>
                        </section>
                    </div>
                </div>
            </div>

            <!-- Courses View -->
            <div id="view-courses" class="rb-view" style="display: none;">
                <header class="rb-header">
                    <h2>Master <span class="highlight">Catalog</span></h2>
                    <p>Global monitor for module performance and high-level curriculum oversight.</p>
                </header>
                <div class="desktop-only"
                    style="display: grid; grid-template-columns: 1fr 300px; gap: 30px; margin-bottom: 30px;">
                    <section class="rb-card distribution-card"
                        style="padding: 30px; display: flex; flex-direction: row; align-items: center; gap: 40px; justify-content: space-between;">
                        <div style="flex: 1;">
                            <h3 style="margin-bottom: 10px;">Curriculum Distribution</h3>
                            <p style="font-size: 13px; color: var(--text-muted);">Current allocation of educational
                                modules across verified disciplinary domains.</p>
                            <div class="distribution-legend" style="display: flex; gap: 15px; margin-top: 20px;">
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <div
                                        style="width: 10px; height: 10px; border-radius: 2px; background: var(--rb-primary);">
                                    </div>
                                    <span style="font-size: 11px; color: var(--text-secondary);">Technique (42%)</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <div
                                        style="width: 10px; height: 10px; border-radius: 2px; background: var(--rb-accent);">
                                    </div>
                                    <span style="font-size: 11px; color: var(--text-secondary);">Management (28%)</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <div style="width: 10px; height: 10px; border-radius: 2px; background: #ffb800;">
                                    </div>
                                    <span style="font-size: 11px; color: var(--text-secondary);">Operations (30%)</span>
                                </div>
                            </div>
                        </div>
                        <div
                            style="width: 100px; height: 100px; border-radius: 50%; border: 12px solid var(--rb-primary); border-top-color: var(--rb-accent); border-right-color: #ffb800; flex-shrink: 0;">
                        </div>
                    </section>
                    <section class="rb-card" style="padding: 24px; justify-content: center; text-align: center;">
                        <div
                            style="font-size: 10px; font-weight: 800; color: var(--text-muted); text-transform: uppercase;">
                            Total Enrollment</div>
                        <div style="font-size: 42px; font-weight: 900; color: white; margin: 10px 0;">1,428</div>
                        <div style="font-size: 11px; color: var(--rb-accent); font-weight: 700;">+12% vs last month
                        </div>
                    </section>
                </div>
                <div class="course-grid" id="full-course-list">
                    <!-- Populated via JS -->
                </div>
            </div>

            <!-- Analytics View -->
            <div id="view-analytics" class="rb-view" style="display: none;">
                <header class="rb-header">
                    <h2>Engagement <span class="highlight">Matrix</span></h2>
                    <p>Deep-dive telemetry across user interactions and enrollment velocity.</p>
                </header>
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 30px;">
                    <section class="rb-card">
                        <h3>Interaction Growth</h3>
                        <div
                            style="height: 250px; display: flex; align-items: flex-end; gap: 20px; margin-top: 30px; border-bottom: 2px solid var(--border-subtle);">
                            <div class="chart-bar" data-tooltip="Technique: 85%"
                                style="flex: 1; height: 85%; background: var(--rb-primary); border-radius: 4px 4px 0 0; position: relative;">
                                <span
                                    style="position: absolute; top: -25px; width: 100%; text-align: center; font-size: 12px; font-weight:800;">85%</span>
                            </div>
                            <div class="chart-bar" data-tooltip="Foundation: 62%"
                                style="flex: 1; height: 62%; background: var(--rb-accent); border-radius: 4px 4px 0 0; position: relative;">
                                <span
                                    style="position: absolute; top: -25px; width: 100%; text-align: center; font-size: 12px; font-weight:800;">62%</span>
                            </div>
                            <div class="chart-bar" data-tooltip="Innovation: 45%"
                                style="flex: 1; height: 45%; background: #ffb800; border-radius: 4px 4px 0 0; position: relative;">
                                <span
                                    style="position: absolute; top: -25px; width: 100%; text-align: center; font-size: 12px; font-weight:800;">45%</span>
                            </div>
                            <div class="chart-bar" data-tooltip="Theory: 92%"
                                style="flex: 1; height: 92%; background: #7b61ff; border-radius: 4px 4px 0 0; position: relative;">
                                <span
                                    style="position: absolute; top: -25px; width: 100%; text-align: center; font-size: 12px; font-weight:800;">92%</span>
                            </div>
                        </div>
                        <div style="display: flex; gap: 20px; margin-top: 15px;">
                            <span
                                style="flex:1; text-align:center; font-size:11px; color: var(--text-muted); font-weight:700;">Technique</span>
                            <span
                                style="flex:1; text-align:center; font-size:11px; color: var(--text-muted); font-weight:700;">Foundation</span>
                            <span
                                style="flex:1; text-align:center; font-size:11px; color: var(--text-muted); font-weight:700;">Innovation</span>
                            <span
                                style="flex:1; text-align:center; font-size:11px; color: var(--text-muted); font-weight:700;">Theory</span>
                        </div>
                    </section>
                    <section class="rb-card">
                        <h3>User Demographics</h3>
                        <div style="margin-top: 30px; display: flex; flex-direction: column; gap: 20px;">
                            <div class="demo-bar-container" style="display: flex; align-items: center; gap: 15px;">
                                <div
                                    style="width: 50px; height: 50px; border-radius: 50%; border: 4px solid var(--rb-primary); border-top-color: transparent; flex-shrink: 0;">
                                </div>
                                <div style="flex: 1;">
                                    <div
                                        style="display: flex; justify-content: space-between; font-size: 13px; font-weight: 800;">
                                        <span>Pro Chefs</span>
                                        <span>35%</span>
                                    </div>
                                    <div
                                        style="height: 6px; background: rgba(255,255,255,0.05); border-radius: 3px; margin-top: 8px;">
                                        <div class="demo-fill"
                                            style="width: 35%; height: 100%; background: var(--rb-primary); border-radius: 3px; color: var(--rb-primary);">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="demo-bar-container" style="display: flex; align-items: center; gap: 15px;">
                                <div
                                    style="width: 50px; height: 50px; border-radius: 50%; border: 4px solid var(--rb-accent); border-right-color: transparent; flex-shrink: 0;">
                                </div>
                                <div style="flex: 1;">
                                    <div
                                        style="display: flex; justify-content: space-between; font-size: 13px; font-weight: 800;">
                                        <span>Home Cooks</span>
                                        <span>48%</span>
                                    </div>
                                    <div
                                        style="height: 6px; background: rgba(255,255,255,0.05); border-radius: 3px; margin-top: 8px;">
                                        <div class="demo-fill"
                                            style="width: 48%; height: 100%; background: var(--rb-accent); border-radius: 3px; color: var(--rb-accent);">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="demo-bar-container" style="display: flex; align-items: center; gap: 15px;">
                                <div
                                    style="width: 50px; height: 50px; border-radius: 50%; border: 4px solid #ffb800; border-bottom-color: transparent; flex-shrink: 0;">
                                </div>
                                <div style="flex: 1;">
                                    <div
                                        style="display: flex; justify-content: space-between; font-size: 13px; font-weight: 800;">
                                        <span>Corporate</span>
                                        <span>17%</span>
                                    </div>
                                    <div
                                        style="height: 6px; background: rgba(255,255,255,0.05); border-radius: 3px; margin-top: 8px;">
                                        <div class="demo-fill"
                                            style="width: 17%; height: 100%; background: #ffb800; border-radius: 3px; color: #ffb800;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 30px; margin-top: 30px;">
                    <section class="rb-card">
                        <h3>Regional Activity</h3>
                        <div style="margin-top: 20px; display: flex; flex-direction: column; gap: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 13px; font-weight: 600;">North America</span>
                                <span class="badge"
                                    style="background: rgba(79, 142, 247, 0.1); color: var(--rb-primary);">8.2k</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 13px; font-weight: 600;">Europe / UK</span>
                                <span class="badge"
                                    style="background: rgba(0, 212, 180, 0.1); color: var(--rb-accent);">6.4k</span>
                            </div>
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <span style="font-size: 13px; font-weight: 600;">Asia Pacific</span>
                                <span class="badge"
                                    style="background: rgba(255, 184, 0, 0.1); color: #ffb800;">4.1k</span>
                            </div>
                        </div>
                    </section>
                    <section class="rb-card" style="grid-column: span 2;">
                        <h3>Peak Learning Activity</h3>
                        <div style="height: 120px; display: flex; align-items: flex-end; gap: 8px; margin-top: 20px;">
                            <div class="chart-bar" data-tooltip="08:00 - 15% Load"
                                style="flex: 1; height: 15%; background: var(--rb-primary); opacity: 0.1; border-radius: 2px;">
                            </div>
                            <div class="chart-bar" data-tooltip="10:00 - 25% Load"
                                style="flex: 1; height: 25%; background: var(--rb-primary); opacity: 0.2; border-radius: 2px;">
                            </div>
                            <div class="chart-bar" data-tooltip="12:00 - 45% Load"
                                style="flex: 1; height: 45%; background: var(--rb-primary); opacity: 0.4; border-radius: 2px;">
                            </div>
                            <div class="chart-bar" data-tooltip="14:00 - 75% Load"
                                style="flex: 1; height: 75%; background: var(--rb-primary); opacity: 0.7; border-radius: 2px;">
                            </div>
                            <div class="chart-bar" data-tooltip="16:00 - 95% PEAK"
                                style="flex: 1; height: 95%; background: var(--rb-primary); border-radius: 2px;"></div>
                            <div class="chart-bar" data-tooltip="18:00 - 85% Load"
                                style="flex: 1; height: 85%; background: var(--rb-primary); opacity: 0.8; border-radius: 2px;">
                            </div>
                            <div class="chart-bar" data-tooltip="20:00 - 65% Load"
                                style="flex: 1; height: 65%; background: var(--rb-primary); opacity: 0.5; border-radius: 2px;">
                            </div>
                            <div class="chart-bar" data-tooltip="22:00 - 35% Load"
                                style="flex: 1; height: 35%; background: var(--rb-primary); opacity: 0.3; border-radius: 2px;">
                            </div>
                            <div class="chart-bar" data-tooltip="00:00 - 20% Load"
                                style="flex: 1; height: 20%; background: var(--rb-primary); opacity: 0.1; border-radius: 2px;">
                            </div>
                            <div class="chart-bar" data-tooltip="02:00 - 10% Load"
                                style="flex: 1; height: 10%; background: var(--rb-primary); opacity: 0.05; border-radius: 2px;">
                            </div>
                        </div>
                        <div
                            style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 9px; color: var(--text-muted); font-weight:800;">
                            <span>08:00</span><span>12:00</span><span>16:00</span><span>20:00</span><span>00:00</span>
                        </div>
                    </section>
                </div>
                <section class="rb-card">
                    <h3>Institutional Dynamics</h3>
                    <div style="margin-top: 30px; display: flex; flex-direction: column; gap: 20px;">
                        <div>
                            <div
                                style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 10px;">
                                <span style="font-weight:700;">Curriculum Engagement</span>
                                <span style="color: var(--rb-primary);">78%</span>
                            </div>
                            <div style="height: 8px; background: rgba(255,255,255,0.05); border-radius: 4px;">
                                <div style="width: 78%; height:100%; background: var(--rb-primary); border-radius:4px;">
                                </div>
                            </div>
                        </div>
                        <div>
                            <div
                                style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 10px;">
                                <span style="font-weight:700;">Resource Accessibility</span>
                                <span style="color: var(--rb-accent);">42%</span>
                            </div>
                            <div style="height: 8px; background: rgba(255,255,255,0.05); border-radius: 4px;">
                                <div style="width: 42%; height:100%; background: var(--rb-accent); border-radius:4px;">
                                </div>
                            </div>
                        </div>
                        <div>
                            <div
                                style="display: flex; justify-content: space-between; font-size: 12px; margin-bottom: 10px;">
                                <span style="font-weight:700;">Academic Momentum</span>
                                <span style="color: #ffb800;">55%</span>
                            </div>
                            <div style="height: 8px; background: rgba(255,255,255,0.05); border-radius: 4px;">
                                <div style="width: 55%; height:100%; background: #ffb800; border-radius:4px;"></div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- Manage Course Modal -->
            <div id="manage-course-modal" class="rb-modal">
                <div class="modal-content">
                    <button class="close-modal" onclick="closeModal('manage-course-modal')">√ó</button>
                    <div style="margin-bottom: 25px;">
                        <h2 style="font-size: 24px; font-weight: 900; margin: 0;">Manage <span
                                class="highlight">Course</span></h2>
                        <p style="color: var(--text-muted); font-size: 13px; margin-top: 5px;">Update course parameters
                            and availability.</p>
                    </div>
                    <form id="manage-course-form" onsubmit="handleUpdateCourse(event)">
                        <input type="hidden" id="edit-course-id">
                        <div class="form-group">
                            <label style="font-size: 11px; color: var(--text-muted); text-transform: uppercase;">Course
                                Name</label>
                            <input type="text" id="edit-course-name" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label
                                style="font-size: 11px; color: var(--text-muted); text-transform: uppercase;">Category</label>
                            <select id="edit-course-category" class="form-input"
                                style="background: rgba(0,0,0,0.2); color: white;">
                                <option value="Technique">Technique</option>
                                <option value="Management">Management</option>
                                <option value="Operations">Operations</option>
                                <option value="Innovation">Innovation</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label
                                style="font-size: 11px; color: var(--text-muted); text-transform: uppercase;">Instructor</label>
                            <input type="text" id="edit-course-instructor" class="form-input" required>
                        </div>
                        <div class="form-group">
                            <label
                                style="font-size: 11px; color: var(--text-muted); text-transform: uppercase;">Status</label>
                            <select id="edit-course-status" class="form-input"
                                style="background: rgba(0,0,0,0.2); color: white;">
                                <option value="Active">Active</option>
                                <option value="Upcoming">Upcoming</option>
                                <option value="Archived">Archived</option>
                            </select>
                        </div>
                        <button type="submit" class="rb-btn" style="width: 100%; margin-top: 20px; height: 50px;">Save
                            Changes</button>
                    </form>
                </div>
            </div>

            <!-- Moderation View -->
            <div id="view-mods" class="rb-view" style="display: none;">
                <header class="rb-header">
                    <div
                        style="font-size: 10px; text-transform: uppercase; letter-spacing: 0.2em; color: var(--rb-primary); font-weight: 800; margin-bottom: 15px;">
                        Administration Module</div>
                    <h2>Dialogue <span class="highlight">Oversight</span></h2>
                    <p>Community moderation portal for managing discussions and user-generated content.</p>
                </header>
                <div class="rb-table-container">
                    <table class="rb-table">
                        <thead>
                            <tr>
                                <th>User</th>
                                <th>Contextual Fragment</th>
                                <th>Status</th>
                                <th style="text-align: right;">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="comment-grid">
                            <!-- Populated via JS -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <script src="../js/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const user = checkAuth();
            if (!user || (!['Manager', 'Super Admin'].includes(user.position))) return;

            updateCapacity();
            loadModeration();
            loadCourses();
            loadFeed();
        });

        function switchView(viewName) {
            document.querySelectorAll('.rb-view').forEach(v => v.style.display = 'none');
            document.getElementById(`view-${viewName}`).style.display = 'block';
            document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
            const btn = document.getElementById(`btn-${viewName}`);
            if (btn) btn.classList.add('active');

            if (viewName === 'courses') loadCourses();
            if (viewName === 'mods') loadModeration();
        }

        function updateCapacity() {
            const limit = parseInt(localStorage.getItem('cs_course_limit') || 12);
            const courses = JSON.parse(localStorage.getItem('cs_courses') || '[]');
            const used = courses.length;
            const pct = (used / limit) * 100;

            const usedEl = document.getElementById('used-slots');
            if (usedEl) {
                usedEl.textContent = used;
                document.getElementById('total-slots').textContent = limit;
                document.getElementById('pct-label').textContent = Math.round(pct) + '%';
                document.getElementById('limit-fill').style.width = pct + '%';
            }
        }

        function addCourse() {
            const limit = parseInt(localStorage.getItem('cs_course_limit') || 12);
            const courses = JSON.parse(localStorage.getItem('cs_courses') || '[]');

            if (courses.length >= limit) {
                if (typeof showToast === 'function') showToast('System Limit Reached! Cannot add more courses.', 'error');
                return;
            }

            const newCourse = {
                id: Date.now(),
                name: 'Strategic Kitchen Ops',
                students: 0,
                instructor: 'Manager Team',
                category: 'Management',
                status: 'Upcoming',
                image: 'https://images.unsplash.com/photo-1574096079513-d8259312b785?auto=format&fit=crop&w=400&q=80'
            };
            courses.push(newCourse);
            localStorage.setItem('cs_courses', JSON.stringify(courses));

            updateCapacity();
            if (typeof showToast === 'function') showToast('New course slot initialized.', 'success');
            if (document.getElementById('view-courses').style.display !== 'none') loadCourses();

            // Log action
            const logs = JSON.parse(localStorage.getItem('cs_audit_logs') || '[]');
            logs.unshift({
                id: Date.now(),
                user: 'Admin Manager',
                action: 'Course Logic',
                timestamp: new Date().toLocaleTimeString(),
                details: 'New Course Slot Initialized'
            });
            localStorage.setItem('cs_audit_logs', JSON.stringify(logs));
            loadFeed();
        }

        function loadCourses() {
            const courses = JSON.parse(localStorage.getItem('cs_courses') || '[]');
            const container = document.getElementById('full-course-list');
            if (!container) return;

            container.innerHTML = courses.map(c => `
                <div class="course-card">
                    <img src="${c.image || 'https://images.unsplash.com/photo-1556910103-1c02745aae4d?auto=format&fit=crop&w=400&q=80'}" class="course-image">
                    <div class="course-content">
                        <span class="course-category">${c.category}</span>
                        <h3 class="course-title">${c.name}</h3>
                        <div class="course-meta">
                            <span>Prof. ${c.instructor}</span>
                            <span>üë• ${c.students} Students</span>
                        </div>
                        <div style="display:flex; justify-content:space-between; align-items:center;">
                            <span class="badge status-toggle" 
                                onclick="toggleCourseStatus(${c.id})"
                                style="background: ${c.status === 'Active' ? 'rgba(0, 212, 180, 0.1)' : 'rgba(255, 184, 0, 0.1)'}; 
                                       color: ${c.status === 'Active' ? 'var(--rb-accent)' : '#ffb800'};">${c.status}</span>
                            <button class="rb-btn" onclick="openManageModal(${c.id})" style="padding: 6px 12px; font-size: 10px; background: rgba(255,255,255,0.05); color: white;">Manage</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        function loadModeration() {
            let comments = JSON.parse(localStorage.getItem('cs_comments') || '[]');
            const container = document.getElementById('comment-grid');
            if (!container) return;

            if (comments.length === 0) {
                comments = [
                    { id: 1, user: 'Rahul', role: 'Student', text: 'This platform is amazing! The molecular gastronomy course blew my mind.', status: 'approved' },
                    { id: 2, user: 'Priya', role: 'Student', text: 'Can we have more time for the pastry final exam?', status: 'approved' },
                    { id: 3, user: 'Vikram', role: 'Student', text: 'The new sushi course looks promising. Is there a waitlist?', status: 'approved' },
                    { id: 4, user: 'Amit', role: 'Staff', text: 'I faced some issues with the poll animation on mobile.', status: 'pending' },
                    { id: 5, user: 'Sneha', role: 'Student', text: 'The farm-to-table lecture was truly inspiring. Highly recommend!', status: 'approved' },
                    { id: 6, user: 'Karan', role: 'Student', text: 'When is the next wine pairing class scheduled?', status: 'approved' },
                    { id: 7, user: 'Anjali', role: 'Student', text: 'Spam comment 123', status: 'pending' },
                    { id: 8, user: 'Roberto', role: 'Student', text: 'The UI is so much smoother now with the multi-view system!', status: 'approved' },
                    { id: 9, user: 'Meera', role: 'Student', text: 'Chef Mario is the best instructor for Foundation levels.', status: 'approved' },
                    { id: 10, user: 'Sam', role: 'Student', text: 'Looking for a study partner for the Butchery final.', status: 'approved' }
                ];
                localStorage.setItem('cs_comments', JSON.stringify(comments));
            }

            container.innerHTML = comments.map(c => `
                <tr>
                    <td>
                        <div style="font-weight: 800; color: white;">${c.user}</div>
                        <div style="font-size: 11px; color: var(--text-muted);">${c.role}</div>
                    </td>
                    <td style="max-width: 400px; font-style: italic;">"${c.text}"</td>
                    <td>
                        <span class="badge" style="background: ${c.status === 'pending' ? 'rgba(255,77,77,0.1)' : 'rgba(0,212,180,0.1)'}; color: ${c.status === 'pending' ? '#ff4d4d' : 'var(--rb-primary)'};">
                            ${c.status}
                        </span>
                    </td>
                    <td style="text-align: right;">
                        <div style="display: flex; gap: 10px; justify-content: flex-end;">
                            ${c.status === 'pending' ? `<button class="rb-btn" style="padding: 6px 15px; font-size: 11px; background: var(--rb-accent); color: black;" onclick="approve(${c.id})">Approve</button>` : ''}
                            <button class="rb-btn" style="padding: 6px 15px; font-size: 11px; background: rgba(255,77,77,0.1); color: #ff4d4d;" onclick="reject(${c.id})">Reject</button>
                        </div>
                    </td>
                </tr>
            `).join('');
        }

        function loadFeed() {
            let logs = [];
            try {
                logs = JSON.parse(localStorage.getItem('cs_audit_logs') || '[]');
            } catch (e) { logs = []; }

            const timeline = document.getElementById('dashboard-timeline');
            if (timeline) {
                if (logs.length === 0) {
                    logs = [
                        { user: 'System', details: 'Database shard migration complete', timestamp: '02:00:05' },
                        { user: 'Admin', details: 'Global sync protocol initiated', timestamp: '09:12:44' },
                        { user: 'Security', details: 'Access geometry verified', timestamp: '10:05:21' },
                        { user: 'Manager', details: 'Monthly curriculum audit finalized', timestamp: '11:30:00' },
                        { user: 'Edge Node', details: 'Propagation of v2.4 catalog complete', timestamp: '12:15:22' }
                    ];
                    localStorage.setItem('cs_audit_logs', JSON.stringify(logs));
                }

                if (logs.length > 0) {
                    timeline.innerHTML = logs.slice(0, 6).map(log => `
                        <div class="timeline-item">
                            <div style="font-size: 11px; color: var(--rb-primary); font-weight: 800; text-transform: uppercase;">${log.user}</div>
                            <div style="font-size: 13px; font-weight: 600; margin: 4px 0;">${log.details || log.action || 'System Event'}</div>
                            <div style="font-size: 10px; color: var(--text-muted);">${log.timestamp}</div>
                        </div>
                    `).join('');
                }
            }
        }

        function approve(id) {
            const comments = JSON.parse(localStorage.getItem('cs_comments') || '[]');
            const comm = comments.find(c => c.id === id);
            if (comm) comm.status = 'approved';
            localStorage.setItem('cs_comments', JSON.stringify(comments));
            loadModeration();
            if (typeof showToast === 'function') showToast('Comment approved and live.', 'success');
        }

        function reject(id) {
            let comments = JSON.parse(localStorage.getItem('cs_comments') || '[]');
            comments = comments.filter(c => c.id !== id);
            localStorage.setItem('cs_comments', JSON.stringify(comments));
            loadModeration();
            if (typeof showToast === 'function') showToast('Comment removed from system.', 'warning');
        }

        function openManageModal(id) {
            const courses = JSON.parse(localStorage.getItem('cs_courses') || '[]');
            const course = courses.find(c => c.id === id);
            if (!course) return;

            document.getElementById('edit-course-id').value = course.id;
            document.getElementById('edit-course-name').value = course.name;
            document.getElementById('edit-course-category').value = course.category || 'Technique';
            document.getElementById('edit-course-instructor').value = course.instructor || '';
            document.getElementById('edit-course-status').value = course.status || 'Active';

            document.getElementById('manage-course-modal').classList.add('active');
        }

        function closeModal(id) {
            document.getElementById(id).classList.remove('active');
        }

        function handleUpdateCourse(event) {
            event.preventDefault();
            const id = parseInt(document.getElementById('edit-course-id').value);
            const courses = JSON.parse(localStorage.getItem('cs_courses') || '[]');
            const index = courses.findIndex(c => c.id === id);

            if (index !== -1) {
                courses[index].name = document.getElementById('edit-course-name').value;
                courses[index].category = document.getElementById('edit-course-category').value;
                courses[index].instructor = document.getElementById('edit-course-instructor').value;
                courses[index].status = document.getElementById('edit-course-status').value;

                localStorage.setItem('cs_courses', JSON.stringify(courses));
                loadCourses();
                closeModal('manage-course-modal');
                if (typeof showToast === 'function') showToast('Course updated successfully', 'success');
            }
        }

        function toggleCourseStatus(id) {
            const courses = JSON.parse(localStorage.getItem('cs_courses') || '[]');
            const index = courses.findIndex(c => c.id === id);

            if (index !== -1) {
                courses[index].status = courses[index].status === 'Active' ? 'Upcoming' : 'Active';
                localStorage.setItem('cs_courses', JSON.stringify(courses));
                loadCourses();
                if (typeof showToast === 'function') {
                    const status = courses[index].status;
                    showToast(`Course set to ${status}`, status === 'Active' ? 'success' : 'info');
                }
            }
        }
    </script>
</body>

</html>